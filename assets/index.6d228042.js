import{_ as D}from"./index.a79b1f65.js";/* empty css               *//* empty css              *//* empty css              *//* empty css              *//* empty css               */import{d as O,r as P,o as U,b as A,aK as H,B as _,C as u,aH as s,aG as c,u as y,aJ as x,aI as B,F as g,aD as k,aM as w,aN as I,aE as J,b7 as K,b8 as W,b9 as X,b3 as Y,b2 as Z,b6 as q,aY as z,ba as Q,bb as ee,bc as te,aX as ae,aZ as oe,aR as ne}from"./arco.9b030e5c.js";import{b as E,f as G,g as v,n as C,u as h}from"./walletProvider.fc3ac427.js";import"./chart.3fc0a8c8.js";import"./vue.fa72a6ed.js";const se=f=>(K("data-v-42a60dfd"),f=f(),W(),f),re={style:{padding:"1rem"}},ce={class:"nft-footer"},ie=se(()=>g("br",null,null,-1)),de={class:"nft-footer"},le=w(" open "),_e=O({setup(f){const d=P({loading:!1,total:0,items:[]}),j=async(t,r)=>{const a=await fetch(r).then(o=>o.json()),e={token:t,name:`${a.name}`,image:`${a.image}`};if(a.attributes){const o=a.attributes.find(l=>l.trait_type==="Score");o&&(e.score=Number(o.value));const n=a.attributes.find(l=>l.trait_type==="Grade");n&&(e.grade=Number(n.value))}return e},$=async()=>{const t=h();if(t){d.loading=!0;const r=v.connect(C,t),a=await t.getAddress(),{total:e,rows:o}=await r.tokenOfOwnerList(a,0,10),n=await r.tokenURIList(o),l=await Promise.all(n.map((m,p)=>j(o[p].toNumber(),m)));d.total=e.toNumber(),d.items=l.sort((m,p)=>m.name.localeCompare(p.name)),d.loading=!1}},M=async t=>{const r=h();if(r){const a=v.connect(C,r);let e="",o=0;do{if(e=await a.tokenURI(t.token),console.log(e),e.endsWith("goldbox.json"))await new Promise(n=>{setTimeout(()=>{n()},3e3)});else{const n=await j(t.token,e);t.image=n.image,t.name=n.name,t.score=n.score}o+=1}while(e.includes("goldbox")&&o<10)}},R=async t=>{const r=h();if(r){t.loading=!0;try{await(await v.connect(C,r).openGoldBox(t.token)).wait(),await M(t)}catch(a){const{error:e,message:o}=a;console.error(a),ne.warning(e?e.data.message:o)}t.loading=!1}},b=()=>{$()},N=()=>{d.items=[],d.total=0};return U(()=>{E.on(b),G.on(N),h()&&b()}),A(()=>{E.off(b),G.off(N)}),(t,r)=>{const a=X,e=Y,o=Z,n=H("icon-more"),l=q,m=z,p=Q,F=ee,L=te,T=ae,V=oe;return _(),u("div",re,[s(V,{gutter:[10,10]},{default:c(()=>[y(d).loading?(_(),u(x,{key:0},B(4,(i,S)=>s(m,{key:S,xs:12,lg:6,xl:4},{default:c(()=>[s(l,{style:{"border-radius":"0.5rem"},"body-style":{padding:0},hoverable:""},{cover:c(()=>[s(e,{animation:""},{default:c(()=>[s(a,{class:"skeleton-image"})]),_:1})]),default:c(()=>[s(e,{style:{width:"80%",padding:"0.5rem"},animation:""},{default:c(()=>[s(o,{rows:2,"line-height":18})]),_:1}),g("div",ce,[s(n,{style:{width:"20px",height:"20px",float:"right",margin:"6px"}})])]),_:1})]),_:2},1024)),64)):(_(),u(x,{key:1},[y(d).items.length==0?(_(),k(p,{key:0})):(_(!0),u(x,{key:1},B(y(d).items,i=>(_(),k(m,{key:i.token,xs:12,lg:6,xl:4},{default:c(()=>[s(l,{style:{"border-radius":"0.5rem"},"body-style":{padding:0},hoverable:""},{cover:c(()=>[g("div",null,[s(F,{src:i.image,width:"100%",height:"100%",class:"nft-image"},null,8,["src"])])]),default:c(()=>[s(L,{title:`${i.name}  #${i.token}`,style:{padding:"0.5rem"}},{description:c(()=>[w(" Grade : "+I(i.grade)+" ",1),ie,w(" Score : "+I(i.score),1)]),_:2},1032,["title"]),g("div",de,[i.name==="Gold Box"?(_(),k(T,{key:0,type:"primary",status:"success",loading:i.loading,onClick:S=>R(i)},{default:c(()=>[le]),_:2},1032,["loading","onClick"])):J("",!0),s(n,{style:{width:"20px",height:"20px",float:"right",margin:"6px"}})])]),_:2},1024)]),_:2},1024))),128))],64))]),_:1})])}}});var we=D(_e,[["__scopeId","data-v-42a60dfd"]]);export{we as default};
