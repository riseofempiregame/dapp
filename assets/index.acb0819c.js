import{_ as V,u as D,i as z}from"./index.1862b529.js";/* empty css               *//* empty css              */import{b as x,u as y}from"./walletProvider.14422f25.js";/* empty css              */import{d as E,e as C,r as T,aY as H,o as L,b as Z,aK as u,aZ as G,B as n,aD as c,aG as s,u as d,F as k,aH as l,a_ as R,C as U,D as A,aE as w,aM as F,aN as K,aR as h,a$ as P,b0 as S,b1 as X,b2 as Y,aX as q,b3 as J,n as O}from"./arco.a4585501.js";/* empty css               */import{g as Q}from"./vue.33ee45d8.js";import"./chart.6007d72e.js";const W={class:"game-box"},ee=E({setup(te){const{t:m}=D(),g=C(null),a=T({state:0}),r=C(!1);Q("message",({data:{action:t,status:e}})=>{if(t){switch(t){case"game_status":a.state=0,H.warning({content:m("enter.logoutmsg"),title:m("enter.tips")});break}console.log(t,e)}});const j=async()=>{const t=y();if(t)try{const e=(await t.getAddress()).toLocaleLowerCase(),o=new Date().getTime(),i=await t.signMessage(`${e}_${o}`);a.state=1;const _=`https://cdn.riseofempire.io/${z.global.locale==="zh-CN"?"zh/":""}?timestamp=${o}&address=${e}&sign=${i}`;O(()=>{g.value.src=_})}catch(e){const{error:o,message:i}=e;h.warning(o?o.data.message:i)}else h.warning(m("pleaseconnect"))},p=()=>{a.state=0};return L(()=>{x.on(p),y()&&p()}),Z(()=>{x.off(p)}),(t,e)=>{const o=u("IconClose"),i=u("icon-home"),f=u("IconImport"),_=P,I=S,$=X,v=Y,B=q,M=J,N=G("drag");return n(),c(M,{justify:"center"},{default:s(()=>[d(a).state==1?(n(),c(v,{key:0},{default:s(()=>[k("div",W,[k("iframe",{ref_key:"elifame",ref:g,class:"game-iframe"},null,512)]),l($,{popupVisible:r.value,"onUpdate:popupVisible":e[1]||(e[1]=b=>r.value=b),style:{"z-index":"99999999"},trigger:["click","hover"],"click-to-close":"",position:"top"},{content:s(()=>[l(I,{style:{marginBottom:"-4px"},mode:"popButton","tooltip-props":{position:"left"},"show-collapse-button":"",onMenuItemClick:e[0]||(e[0]=b=>{d(a).state=0,r.value=!1})},{default:s(()=>[l(_,{key:"1"},{icon:s(()=>[l(f)]),_:1})]),_:1})]),default:s(()=>[R((n(),U("div",{class:A(`button-trigger ${r.value?"button-trigger-active":""}`)},[r.value?(n(),c(o,{key:0})):(n(),c(i,{key:1}))],2)),[[N]])]),_:1},8,["popupVisible"])]),_:1})):w("",!0),d(a).state==0?(n(),c(v,{key:1,flex:"200px"},{default:s(()=>[l(B,{class:"game-enterbtn",long:"",size:"large",type:"primary",status:"success",onClick:j},{default:s(()=>[F(K(t.$t("menu.enter")),1)]),_:1})]),_:1})):w("",!0)]),_:1})}}});var pe=V(ee,[["__scopeId","data-v-07f11ebb"]]);export{pe as default};
