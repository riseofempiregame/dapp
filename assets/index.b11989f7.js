import{_ as N,u as V,i as D}from"./index.ade04a53.js";/* empty css               *//* empty css              */import{b as x,u as y}from"./walletProvider.da6d7796.js";/* empty css              */import{d as z,e as C,r as E,o as T,b as H,aK as _,aY as L,B as n,aD as i,aG as s,u,F as k,aH as c,aZ as Z,C as G,D as R,aE as w,aM as U,aN as A,a_ as F,a$ as K,b0 as P,b1 as S,b2 as X,aX as Y,b3 as q,n as J,aR as O}from"./arco.80c7dde8.js";/* empty css               */import{f as Q}from"./vue.16fab11f.js";import"./chart.b84c2f99.js";const W={class:"game-box"},ee=z({setup(te){const{t:d}=V(),g=C(null),a=E({state:0}),l=C(!1);Q("message",({data:{action:t,status:e}})=>{if(t){switch(t){case"game_status":a.state=0,F.warning({content:d("enter.logoutmsg"),title:d("enter.tips")});break}console.log(t,e)}});const h=async()=>{const t=y();if(t)try{const e=(await t.getAddress()).toLocaleLowerCase(),o=new Date().getTime(),r=await t.signMessage(`${e}_${o}`);a.state=1;const p=`https://cdn.riseofempire.io/${D.global.locale==="zh-CN"?"zh/":""}?timestamp=${o}&address=${e}&sign=${r}`;J(()=>{g.value.src=p})}catch(e){const{error:o,message:r}=e;O.warning(o?o.data.message:r)}},m=()=>{a.state=0};return T(()=>{x.on(m),y()&&m()}),H(()=>{x.off(m)}),(t,e)=>{const o=_("IconClose"),r=_("icon-home"),f=_("IconImport"),p=K,j=P,I=S,v=X,$=Y,B=q,M=L("drag");return n(),i(B,{justify:"center"},{default:s(()=>[u(a).state==1?(n(),i(v,{key:0},{default:s(()=>[k("div",W,[k("iframe",{ref_key:"elifame",ref:g,class:"game-iframe"},null,512)]),c(I,{popupVisible:l.value,"onUpdate:popupVisible":e[1]||(e[1]=b=>l.value=b),style:{"z-index":"99999999"},trigger:["click","hover"],"click-to-close":"",position:"top"},{content:s(()=>[c(j,{style:{marginBottom:"-4px"},mode:"popButton","tooltip-props":{position:"left"},"show-collapse-button":"",onMenuItemClick:e[0]||(e[0]=b=>u(a).state=0)},{default:s(()=>[c(p,{key:"1"},{icon:s(()=>[c(f)]),_:1})]),_:1})]),default:s(()=>[Z((n(),G("div",{class:R(`button-trigger ${l.value?"button-trigger-active":""}`)},[l.value?(n(),i(o,{key:0})):(n(),i(r,{key:1}))],2)),[[M]])]),_:1},8,["popupVisible"])]),_:1})):w("",!0),u(a).state==0?(n(),i(v,{key:1,flex:"200px"},{default:s(()=>[c($,{class:"game-enterbtn",long:"",size:"large",type:"primary",status:"success",onClick:h},{default:s(()=>[U(A(t.$t("menu.enter")),1)]),_:1})]),_:1})):w("",!0)]),_:1})}}});var pe=N(ee,[["__scopeId","data-v-11206075"]]);export{pe as default};
