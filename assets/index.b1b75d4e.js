import{_ as V}from"./index.8f16f800.js";/* empty css               *//* empty css              *//* empty css              */import{a as y}from"./ROENFT__factory.67be05ff.js";/* empty css               */import{d as D,r as P,o as U,b as A,aK as H,B as _,C as u,aH as s,aG as c,u as x,aJ as k,aI as B,F as g,aD as w,aM as v,aN as I,aE as J,b7 as K,b8 as W,b9 as X,b3 as Y,b2 as Z,b6 as q,aY as z,ba as Q,bb as ee,bc as te,aX as oe,aZ as ae,aR as ne}from"./arco.a48bb61d.js";import{b as E,E as F,F as C,u as b}from"./walletProvider.4ff47679.js";import"./chart.ce373ccb.js";import"./vue.382aebc7.js";const se=f=>(K("data-v-42a60dfd"),f=f(),W(),f),re={style:{padding:"1rem"}},ce={class:"nft-footer"},ie=se(()=>g("br",null,null,-1)),de={class:"nft-footer"},le=v(" open "),_e=D({setup(f){const d=P({loading:!1,total:0,items:[]}),N=async(t,r)=>{const o=await fetch(r).then(a=>a.json()),e={token:t,name:`${o.name}`,image:`${o.image}`};if(o.attributes){const a=o.attributes.find(l=>l.trait_type==="Score");a&&(e.score=Number(a.value));const n=o.attributes.find(l=>l.trait_type==="Grade");n&&(e.grade=Number(n.value))}return e},G=async()=>{const t=b();if(t){d.loading=!0;const r=y.connect(C,t),o=await t.getAddress(),{total:e,rows:a}=await r.tokenOfOwnerList(o,0,10),n=await r.tokenURIList(a),l=await Promise.all(n.map((m,p)=>N(a[p].toNumber(),m)));d.total=e.toNumber(),d.items=l.sort((m,p)=>m.name.localeCompare(p.name)),d.loading=!1}},R=async t=>{const r=b();if(r){const o=y.connect(C,r);let e="",a=0;do{if(e=await o.tokenURI(t.token),console.log(e),e.endsWith("goldbox.json"))await new Promise(n=>{setTimeout(()=>{n()},3e3)});else{const n=await N(t.token,e);t.image=n.image,t.name=n.name,t.score=n.score}a+=1}while(e.includes("goldbox")&&a<10)}},$=async t=>{const r=b();if(r){t.loading=!0;try{await(await y.connect(C,r).openGoldBox(t.token)).wait(),await R(t)}catch(o){const{error:e,message:a}=o;console.error(o),ne.warning(e?e.data.message:a)}t.loading=!1}},h=()=>{G()},j=()=>{d.items=[],d.total=0};return U(()=>{E.on(h),F.on(j),b()&&h()}),A(()=>{E.off(h),F.off(j)}),(t,r)=>{const o=X,e=Y,a=Z,n=H("icon-more"),l=q,m=z,p=Q,M=ee,T=te,L=oe,O=ae;return _(),u("div",re,[s(O,{gutter:[10,10]},{default:c(()=>[x(d).loading?(_(),u(k,{key:0},B(4,(i,S)=>s(m,{key:S,xs:12,lg:6,xl:4},{default:c(()=>[s(l,{style:{"border-radius":"0.5rem"},"body-style":{padding:0},hoverable:""},{cover:c(()=>[s(e,{animation:""},{default:c(()=>[s(o,{class:"skeleton-image"})]),_:1})]),default:c(()=>[s(e,{style:{width:"80%",padding:"0.5rem"},animation:""},{default:c(()=>[s(a,{rows:2,"line-height":18})]),_:1}),g("div",ce,[s(n,{style:{width:"20px",height:"20px",float:"right",margin:"6px"}})])]),_:1})]),_:2},1024)),64)):(_(),u(k,{key:1},[x(d).items.length==0?(_(),w(p,{key:0})):(_(!0),u(k,{key:1},B(x(d).items,i=>(_(),w(m,{key:i.token,xs:12,lg:6,xl:4},{default:c(()=>[s(l,{style:{"border-radius":"0.5rem"},"body-style":{padding:0},hoverable:""},{cover:c(()=>[g("div",null,[s(M,{src:i.image,width:"100%",height:"100%",class:"nft-image"},null,8,["src"])])]),default:c(()=>[s(T,{title:`${i.name}  #${i.token}`,style:{padding:"0.5rem"}},{description:c(()=>[v(" Grade : "+I(i.grade)+" ",1),ie,v(" Score : "+I(i.score),1)]),_:2},1032,["title"]),g("div",de,[i.name==="Gold Box"?(_(),w(L,{key:0,type:"primary",status:"success",loading:i.loading,onClick:S=>$(i)},{default:c(()=>[le]),_:2},1032,["loading","onClick"])):J("",!0),s(n,{style:{width:"20px",height:"20px",float:"right",margin:"6px"}})])]),_:2},1024)]),_:2},1024))),128))],64))]),_:1})])}}});var we=V(_e,[["__scopeId","data-v-42a60dfd"]]);export{we as default};
